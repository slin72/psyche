(this["webpackJsonpspace-game"]=this["webpackJsonpspace-game"]||[]).push([[0],{44:function(e,t,r){},49:function(e,t,r){"use strict";r.r(t);var n=r(36),o=r.n(n),i=r(6),a=r(35),s=(r(44),r(5));function c(e){var t=e.count,r=void 0===t?2e3:t,n=Object(i.useMemo)((function(){for(var e=[],t=0;t<r;t++){var n=4e3,o=2*Math.PI*Math.random(),i=Math.acos(2*Math.random()-1),a=n*Math.cos(o)*Math.sin(i)+(4e3*Math.random()-2e3),s=n*Math.sin(o)*Math.sin(i)+(4e3*Math.random()-2e3),c=n*Math.cos(i)+(2e3*Math.random()-1e3);e.push(a),e.push(s),e.push(c)}return new Float32Array(e)}),[r]);return Object(s.jsxs)("points",{children:[Object(s.jsx)("bufferGeometry",{children:Object(s.jsx)("bufferAttribute",{attachObject:["attributes","position"],count:n.length/3,array:n,itemSize:3})}),Object(s.jsx)("pointsMaterial",{size:15,sizeAttenuation:!0,color:"white",fog:!1})]})}var u=r(10);function l(){var e=Object(i.useRef)();return Object(u.c)((function(){return e.current.rotation.y=e.current.rotation.y+.01})),Object(s.jsx)("group",{ref:e,scale:[100,100,100],position:[0,0,0],children:Object(s.jsxs)("mesh",{position:[0,0,0],children:[Object(s.jsx)("sphereGeometry",{args:[4,32,32]}),Object(s.jsx)("meshBasicMaterial",{color:"#FFFF99",fog:!1}),Object(s.jsx)("pointLight",{distance:6100,intensity:10,color:"white"}),"1"]})})}var h=r(11),m=r(0),j=r.p+"static/media/earth.117f05cb.jpg",p=r.p+"static/media/moon.1dd7bdd6.png",d=r.p+"static/media/mars.d5a1f3ac.jpg";function f(){var e=Object(i.useRef)(),t=Object(u.d)(m.TextureLoader,[j,p,d]),r=Object(h.a)(t,3),n=r[0],o=r[1];r[2];return Object(u.c)((function(t,r){return e.current.rotation.y+=.01})),Object(s.jsxs)("group",{ref:e,scale:[200,200,200],position:[-4e3,0,4e3],children:[Object(s.jsxs)("mesh",{position:[0,0,0],children:[Object(s.jsx)("sphereGeometry",{args:[5,32,32]}),Object(s.jsx)("meshStandardMaterial",{map:n,roughness:1,fog:!1})]}),Object(s.jsxs)("mesh",{position:[5,0,5],children:[Object(s.jsx)("sphereGeometry",{args:[.75,32,32]}),Object(s.jsx)("meshStandardMaterial",{roughness:1,map:o,fog:!1})]})]})}function b(){var e=Object(i.useRef)(),t=Object(u.d)(m.TextureLoader,[d]),r=Object(h.a)(t,1)[0];return Object(u.c)((function(){return e.current.rotation.y=e.current.rotation.y+.01})),Object(s.jsx)("group",{ref:e,scale:[100,100,100],position:[5e3,0,-5e3],children:Object(s.jsxs)("mesh",{position:[0,0,0],children:[Object(s.jsx)("sphereGeometry",{args:[5,32,32]}),Object(s.jsx)("meshStandardMaterial",{map:r,roughness:1,fog:!1})]})})}var g=r(15),x=r(9),O=r(40),y=r(30),M=r.n(y),v=r.p+"static/media/laser.373d639d.mp3",w=r.p+"static/media/engine.75bbe12e.mp3",A=r.p+"static/media/engine2.87c3c40a.mp3",P=r.p+"static/media/bg.898c3fe7.mp3",S=r.p+"static/media/warp.1f9bec85.mp3",k=r.p+"static/media/click.db461987.mp3",B=r.p+"static/media/explosion.615cfd43.mp3",R=new Audio(v),G=new Audio(w),T=new Audio(A),V=new Audio(P),L=new Audio(S),z=new Audio(k),D=(new Audio(B),1),I=M()((function(e,t){var r=new O.a.GrannyKnot,n=new m.TubeBufferGeometry(r,250,.2,10,!0),o=void 0,i=void 0,a=new m.Box3;return{sound:!1,camera:void 0,points:0,health:100,lasers:[],explosions:[],rocks:C(100,n,150,8,(function(){return 1+2.5*Math.random()})),enemies:C(10,n,20,15,1),mutation:{t:0,position:new m.Vector3,startTime:Date.now(),track:n,scale:15,fov:70,hits:!1,rings:F(30,n),particles:C(1500,n,100,1,(function(){return.5+.8*Math.random()})),looptime:4e4,binormal:new m.Vector3,normal:new m.Vector3,clock:new m.Clock(!1),mouse:new m.Vector2(-250,50),dummy:new m.Object3D,ray:new m.Ray,box:new m.Box3},actions:{init:function(r){var o=t(),a=o.mutation,s=o.actions;e({camera:r}),a.clock.start(),s.toggleSound(t().sound),Object(u.b)((function(){var r=t(),o=r.rocks,c=r.enemies,u=Date.now(),l=a.t=(u-a.startTime)%a.looptime/a.looptime;a.position=n.parameters.path.getPointAt(l),a.position.multiplyScalar(a.scale);var h=!1;l>.3&&l<.4?h||(h=!0,E(L)):l>.5&&(h=!1);var m=o.filter(s.test),j=c.filter(s.test),p=m.concat(j),d=a.hits;a.hits=p.length,0===d&&a.hits&&E(z);var f=t().lasers;if(a.hits&&f.length&&u-f[f.length-1]<100){var b=p.map((function(e){return Object(x.a)({time:Date.now()},e)}));e((function(e){return{explosions:[].concat(Object(g.a)(e.explosions),Object(g.a)(b))}})),clearTimeout(i),i=setTimeout((function(){return e((function(e){return{explosions:e.explosions.filter((function(e){var t=e.time;return Date.now()-t<=1e3}))}}))}),1e3),e((function(e){return{points:e.points+100*m.length+200*j.length,rocks:e.rocks.filter((function(e){return!m.find((function(t){return t.guid===e.guid}))})),enemies:e.enemies.filter((function(e){return!j.find((function(t){return t.guid===e.guid}))}))}}))}}))},shoot:function(){e((function(e){return{lasers:[].concat(Object(g.a)(e.lasers),[Date.now()])}})),clearTimeout(o),o=setTimeout((function(){return e((function(e){return{lasers:e.lasers.filter((function(e){return Date.now()-e<=1e3}))}}))}),1e3),E(R,.5)},toggleSound:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!t().sound;e({sound:r}),E(G,1,!0),E(T,.3,!0),E(V,1,!0)},updateMouse:function(e){var r=e.clientX,n=e.clientY;t().mutation.mouse.set(r-window.innerWidth/2,n-window.innerHeight/2)},test:function(e){a.min.copy(e.offset),a.max.copy(e.offset),a.expandByScalar(e.size*e.scale),e.hit.set(1e4,1e4,1e4);var r=t().mutation.ray.intersectBox(a,e.hit);return e.distance=t().mutation.ray.origin.distanceTo(e.hit),r}}}}));function C(e,t,r,n,o){return new Array(e).fill().map((function(){var e=Math.random(),i=t.parameters.path.getPointAt(e);i.multiplyScalar(15);var a=i.clone().add(new m.Vector3(-r+Math.random()*r*2,-r+Math.random()*r*2,-r+Math.random()*r*2)),s=.1+Math.random();return{guid:D++,scale:"function"===typeof o?o():o,size:n,offset:a,pos:i,speed:s,radius:r,t:e,hit:new m.Vector3,distance:1e3}}))}function F(e,t){for(var r=[],n=.4,o=0;o<e;o++){n+=.003;var i=t.parameters.path.getPointAt(n);i.multiplyScalar(15);var a=n*t.tangents.length,s=Math.floor(a),c=t.parameters.path.getPointAt((n+1/t.parameters.path.getLength())%1).multiplyScalar(15),u=(new m.Matrix4).lookAt(i,c,t.binormals[s]);r.push([i.toArray(),u])}return r}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];I.getState().sound?(e.currentTime=0,e.volume=t,e.loop=r,e.play()):e.pause()}var W=I,q=0;function J(e){var t=e.children,r=Object(i.useRef)(),n=Object(i.useRef)(),o=W((function(e){return e.mutation})),a=o.fov,c=o.scale,l=o.binormal,h=o.normal,m=o.track,j=o.mouse,p=Object(u.e)().camera;return Object(u.c)((function(){var e=o.t,t=o.position.clone(),n=m.tangents.length,i=e*n,s=Math.floor(i),u=(s+1)%n;l.subVectors(m.binormals[u],m.binormals[s]),l.multiplyScalar(i-s).add(m.binormals[s]);var d=m.parameters.path.getTangentAt(e);q+=.05*(Math.max(15,15+-j.y/20)-q),h.copy(l).cross(d),t.add(h.clone().multiplyScalar(q)),p.position.copy(t);var f=m.parameters.path.getPointAt((e+30/m.parameters.path.getLength())%1).multiplyScalar(c);p.matrix.lookAt(p.position,f,h),p.quaternion.setFromRotationMatrix(p.matrix),p.fov+=.05*((e>.4&&e<.45?120:a)-p.fov),p.updateProjectionMatrix();var b=m.parameters.path.getPointAt((e+1/m.parameters.path.getLength())%1).multiplyScalar(c);r.current.position.copy(b),r.current.quaternion.setFromRotationMatrix(p.matrix)})),Object(s.jsxs)("group",{ref:r,children:[Object(s.jsx)("pointLight",{distance:400,position:[0,100,-420],intensity:5,color:"indianred"}),Object(s.jsx)("group",{ref:n,position:[0,0,-50],children:t})]})}r(32),new m.BoxBufferGeometry(1,1,40);var H=new m.Color("lightgreen"),K=new m.Color("hotpink");new m.MeshBasicMaterial({color:H}),new m.MeshBasicMaterial({color:K,fog:!1}),new m.Vector3,new m.Vector3;var U=r(51),X=new m.BoxBufferGeometry(1,1,40),Y=new m.Color("lightgreen"),_=new m.Color("hotpink"),N=new m.MeshBasicMaterial({color:Y}),Q=new m.MeshBasicMaterial({color:_,fog:!1}),Z=new m.Vector3,$=new m.Vector3;function ee(){var e=Object(U.a)("/psyche/psychespacecraft2.glb"),t=e.nodes,r=e.materials,n=W((function(e){return e.mutation})),o=n.clock,a=n.mouse,c=n.ray,l=W((function(e){return e.lasers})),h=Object(i.useRef)(),m=Object(i.useRef)(),j=Object(i.useRef)(),p=Object(i.useRef)(),d=Object(i.useRef)(),f=Object(i.useRef)();return Object(u.c)((function(){h.current.position.z=Math.sin(40*o.getElapsedTime())*Math.PI*.2,h.current.rotation.z+=.2*(a.x/500-h.current.rotation.z),h.current.rotation.x+=.2*(-a.y/1200-h.current.rotation.x),h.current.rotation.y+=.2*(-a.x/1200-h.current.rotation.y),h.current.position.x+=.2*(a.x/10-h.current.position.x),h.current.position.y+=.2*(25+-a.y/10-h.current.position.y),p.current.scale.x=1+Math.sin(200*o.getElapsedTime()),p.current.scale.y=1+Math.sin(200*o.getElapsedTime());for(var e=0;e<l.length;e++){m.current.children[e].position.z-=20}j.current.intensity+=.3*((l.length&&Date.now()-l[l.length-1]<100?20:0)-j.current.intensity),h.current.getWorldPosition(Z),h.current.getWorldDirection($),c.origin.copy(Z),c.direction.copy($.negate()),Q.color=n.hits?Y:_,d.current.visible=!n.hits,f.current.visible=!!n.hits})),Object(s.jsxs)("group",{ref:h,children:[Object(s.jsxs)("group",{scale:[.5,.5,.5],children:[Object(s.jsx)("group",{ref:d,position:[0,0,-300],name:"cross"}),Object(s.jsxs)("group",{ref:f,position:[0,0,-300],name:"target",children:[Object(s.jsx)("mesh",{position:[0,20,0],renderOrder:1e3,material:Q,children:Object(s.jsx)("boxGeometry",{args:[40,2,2]})}),Object(s.jsx)("mesh",{position:[0,-20,0],renderOrder:1e3,material:Q,children:Object(s.jsx)("boxGeometry",{args:[40,2,2]})}),Object(s.jsx)("mesh",{position:[20,0,0],renderOrder:1e3,material:Q,children:Object(s.jsx)("boxGeometry",{args:[2,40,2]})}),Object(s.jsx)("mesh",{position:[-20,0,0],renderOrder:1e3,material:Q,children:Object(s.jsx)("boxGeometry",{args:[2,40,2]})})]}),Object(s.jsx)("pointLight",{ref:j,position:[0,0,-20],distance:100,intensity:0,color:"lightgreen"}),Object(s.jsx)("group",{ref:m,children:l.map((function(e,t){return Object(s.jsxs)("group",{children:[Object(s.jsx)("mesh",{position:[-2.8,0,-.8],geometry:X,material:N}),Object(s.jsx)("mesh",{position:[2.8,0,-.8],geometry:X,material:N})]},t)}))}),Object(s.jsxs)("group",{rotation:[Math.PI/2,Math.PI,0],children:[Object(s.jsx)("mesh",{name:"Psyche",castShadow:!0,receiveShadow:!0,geometry:t.Psyche.geometry,material:t.Psyche.material}),Object(s.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.Psyche001.geometry,material:t.Psyche001.material}),Object(s.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.Psyche002.geometry,material:r["Material.002"]})]})]}),Object(s.jsxs)("mesh",{ref:p,scale:[1,1,30],position:[0,1,30],children:[Object(s.jsx)("dodecahedronBufferGeometry",{args:[1.5,0]}),Object(s.jsx)("meshBasicMaterial",{color:"lightblue"})]})]})}function te(){var e=Object(i.useRef)(),t=Object(U.a)("/psyche/PsycheAsteroid1.glb"),r=t.nodes,n=t.materials;return Object(u.c)((function(){return e.current.rotation.x+=.1})),Object(s.jsx)("group",{ref:e,scale:[300,300,300],position:[6e3,0,6e3],children:Object(s.jsx)("mesh",{geometry:r.psyche_LP001.geometry,material:n.psycheAsteroid,rotation:[Math.PI/2,0,0]})})}function re(){var e=Object(i.useRef)();return Object(u.c)((function(t,r){return e.current.rotation.y+=.01})),Object(s.jsxs)("group",{ref:e,scale:[1,1,1],position:[0,0,0],children:[Object(s.jsx)(l,{}),Object(s.jsx)(f,{}),Object(s.jsx)(b,{}),Object(s.jsx)(te,{}),Object(s.jsx)(J,{children:Object(s.jsx)(ee,{})})]})}function ne(){var e=Object(i.useRef)(),t=W((function(e){return e.mutation})),r=t.particles,n=t.dummy;return Object(i.useEffect)((function(){r.forEach((function(t,r){var o=t.offset,i=t.scale;n.position.copy(o),n.scale.set(i,i,i),n.rotation.set(Math.sin(Math.random())*Math.PI,Math.sin(Math.random())*Math.PI,Math.cos(Math.random())*Math.PI),n.updateMatrix(),e.current.setMatrixAt(r,n.matrix)})),e.current.instanceMatrix.needsUpdate=!0}),[]),Object(s.jsxs)("instancedMesh",{ref:e,args:[null,null,r.length],frustumCulled:!1,children:[Object(s.jsx)("coneGeometry",{args:[2,2,3]}),Object(s.jsx)("meshStandardMaterial",{color:"#606060"})]})}function oe(){var e=W((function(e){return e.actions})),t=W((function(e){return e.mutation})),r=t.fov;t.position;function n(){return Object(s.jsx)(i.Suspense,{fallback:null,children:Object(s.jsx)(re,{})})}return Object(s.jsxs)(a.a,{gl:{antialias:!1},camera:{position:[-5e3,0,5e3],near:.01,far:1e5,fov:r},onCreated:function(t){t.gl;var r=t.camera;e.init(r)},children:[" ",Object(s.jsx)("ambientLight",{intensity:.25}),Object(s.jsx)(n,{}),Object(s.jsx)(a.b,{}),Object(s.jsx)(ne,{}),Object(s.jsx)(c,{})]})}o.a.render(Object(s.jsx)(oe,{}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.c36701fa.chunk.js.map