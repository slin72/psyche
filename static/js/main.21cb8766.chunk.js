(this["webpackJsonpspace-game"]=this["webpackJsonpspace-game"]||[]).push([[0],{44:function(e,t,n){},51:function(t,n,o){"use strict";o.r(n);var i=o(35),s=o.n(i),c=o(6),u=o.n(c),l=o(9),d=o(17),h=o(14),p=o(10),f=o(11),m=o(18),v=o(1),b=o(2),j=o(12),y=o.n(j),x=function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,null,[{key:"createButton",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement("button");function r(){if(void 0===t.domOverlay){var r=document.createElement("div");r.style.display="none",document.body.appendChild(r);var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("width",38),o.setAttribute("height",38),o.style.position="absolute",o.style.right="20px",o.style.top="20px",o.addEventListener("click",(function(){i.end()})),r.appendChild(o);var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d","M 12,12 L 28,28 M 28,12 12,28"),a.setAttribute("stroke","#fff"),a.setAttribute("stroke-width",2),o.appendChild(a),void 0===t.optionalFeatures&&(t.optionalFeatures=[]),t.optionalFeatures.push("dom-overlay"),t.domOverlay={root:r}}var i=null;function s(e){return c.apply(this,arguments)}function c(){return(c=Object(m.a)(y.a.mark((function r(o){return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o.addEventListener("end",u),e.xr.setReferenceSpaceType("local"),r.next=4,e.xr.setSession(o);case 4:n.textContent="STOP AR",t.domOverlay.root.style.display="",i=o;case 7:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function u(){i.removeEventListener("end",u),n.textContent="START AR",t.domOverlay.root.style.display="none",i=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="START AR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){null===i?navigator.xr.requestSession("immersive-ar",t).then(s):i.end()}}function o(){n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null}function a(){o(),n.textContent="AR NOT SUPPORTED"}function i(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return n.id="ARButton",n.style.display="none",i(n),navigator.xr.isSessionSupported("immersive-ar").then((function(e){e?r():a()})).catch(a),n;var s=document.createElement("a");return!1===window.isSecureContext?(s.href=document.location.href.replace(/^http:/,"https:"),s.innerHTML="WEBXR NEEDS HTTPS"):(s.href="https://immersiveweb.dev/",s.innerHTML="WEBXR NOT AVAILABLE"),s.style.left="calc(50% - 90px)",s.style.width="180px",s.style.textDecoration="none",i(s),s}}]),e}(),g=function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,null,[{key:"createButton",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement("button");function r(){var r=null;function o(e){return a.apply(this,arguments)}function a(){return(a=Object(m.a)(y.a.mark((function t(o){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.addEventListener("end",i),t.next=3,e.xr.setSession(o);case 3:n.textContent="EXIT VR",r=o;case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){r.removeEventListener("end",i),n.textContent="ENTER VR",r=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="ENTER VR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){if(null===r){var e=[t.optionalFeatures,"local-floor","bounded-floor","hand-tracking"].flat().filter(Boolean);navigator.xr.requestSession("immersive-vr",Object(l.a)(Object(l.a)({},t),{},{optionalFeatures:e})).then(o)}else r.end()}}function o(){n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null}function a(){o(),n.textContent="VR NOT SUPPORTED"}function i(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return n.id="VRButton",n.style.display="none",i(n),navigator.xr.isSessionSupported("immersive-vr").then((function(e){e?r():a()})),n;var s=document.createElement("a");return!1===window.isSecureContext?(s.href=document.location.href.replace(/^http:/,"https:"),s.innerHTML="WEBXR NEEDS HTTPS"):(s.href="https://immersiveweb.dev/",s.innerHTML="WEBXR NOT AVAILABLE"),s.style.left="calc(50% - 90px)",s.style.width="180px",s.style.textDecoration="none",i(s),s}}]),e}(),O=function(e,t,n,r){var o=t.xr.getController(e),a=t.xr.getControllerGrip(e),i=t.xr.getHand(e),s={inputSource:void 0,grip:a,controller:o,hand:i};a.userData.name="grip",o.userData.name="controller",i.userData.name="hand",o.addEventListener("connected",(function(e){e.fake||(s.inputSource=e.data,n(s))})),o.addEventListener("disconnected",(function(e){r(s)}))},w=o(16),S=o(0),M=function(){return new Map},E=function(e,t,n,r){e.has(t)||e.set(t,{key:[r]});var o=e.get(t);o[n]||(o[n]=[]),o[n].push(r)},A=function(e,t,n,r){var o=e.get(t);o&&o[n]&&(o[n]=o[n].filter((function(e){return e!==r})),0===o[n].length&&delete o[n],0===Object.keys(o).length&&e.delete(t))},C=function(e,t,n){var r=e.get(t);return!(!r||!r[n])},P=function(e,t,n){var r=e.get(t);return r&&r[n]},T=o(39),R=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.handedness,o=u.a.useRef(t);u.a.useEffect((function(){o.current=t}),[t]);var a=X(),i=a.controllers;u.a.useEffect((function(){var t=r?i.filter((function(e){return e.inputSource.handedness===r})):i,n=[];return t.forEach((function(t){var r=function(e){return o.current({originalEvent:e,controller:t})};t.controller.addEventListener(e,r),n.push((function(){return t.controller.removeEventListener(e,r)}))})),function(){return n.forEach((function(e){return e()}))}}),[e,i,r])},k=o(5),N=function(){return console.warn("You must provide a ARCanvas or VRCanvas as a wrapper to use interactions")},I=u.a.createContext({hoverState:{},addInteraction:N,removeInteraction:N});function B(e){var t=e.children,n=Object(f.e)(),r=X().controllers,o=u.a.useState((function(){return{left:new Map,right:new Map,none:new Map}})),a=Object(p.a)(o,1)[0],i=u.a.useState((function(){return M()})),s=Object(p.a)(i,1)[0],l=u.a.useCallback((function(e,t,n){E(s,e,t,n)}),[s]),d=u.a.useCallback((function(e,t,n){A(s,e,t,n)}),[s]),h=u.a.useCallback((function(e){var t=Array.from(s.keys()),r=new S.Matrix4;return r.identity().extractRotation(e.matrixWorld),n.raycaster.ray.origin.setFromMatrixPosition(e.matrixWorld),n.raycaster.ray.direction.set(0,0,-1).applyMatrix4(r),n.raycaster.intersectObjects(t,!0)}),[s,n.raycaster]);Object(f.c)((function(){0!==s.size&&r.forEach((function(e){var t=e.controller,r=e.inputSource.handedness,o=a[r],i=new Set,c=h(t);if(n.raycaster.filter)c=n.raycaster.filter(c,n);else{var u=c.find((function(e){return null===e||void 0===e?void 0:e.object}));u&&(c=[u])}c.forEach((function(t){for(var n=t.object;n;){var r;if(C(s,n,"onHover")&&!o.has(n))null===(r=P(s,n,"onHover"))||void 0===r||r.forEach((function(n){return n({controller:e,intersection:t})}));o.set(n,t),i.add(n.id),n=n.parent}}));var l,d=Object(w.a)(o.keys());try{for(d.s();!(l=d.n()).done;){var p,f=l.value;if(!i.has(f.id))null===(p=P(s,f,"onBlur"))||void 0===p||p.forEach((function(t){return t({controller:e})})),o.delete(f)}}catch(m){d.e(m)}finally{d.f()}}))}));var m=function(e){return function(t){var n,r=a[t.controller.inputSource.handedness],o=Object(w.a)(r.keys());try{var i=function(){var o,a=n.value;null===(o=P(s,a,e))||void 0===o||o.forEach((function(e){return e({controller:t.controller,intersection:r.get(a)})}))};for(o.s();!(n=o.n()).done;)i()}catch(c){o.e(c)}finally{o.f()}}};R("select",m("onSelect")),R("selectstart",m("onSelectStart")),R("selectend",m("onSelectEnd")),R("squeeze",m("onSqueeze")),R("squeezeend",m("onSqueezeEnd")),R("squeezestart",m("onSqueezeStart"));var v=Object(c.useMemo)((function(){return{addInteraction:l,removeInteraction:d,hoverState:a}}),[l,d,a]);return Object(k.jsx)(I.Provider,{value:v,children:t})}var L=function(e,t,n){var r=Object(c.useContext)(I),o=r.addInteraction,a=r.removeInteraction,i=void 0!==n,s=Object(c.useRef)(n);Object(c.useEffect)((function(){s.current=n}),[n]),Object(c.useEffect)((function(){if(i){var n=function(e){var t;null===(t=s.current)||void 0===t||t.call(s,e)};o(e.current,t,n);var r=e.current;return function(){return a(r,t,n)}}}),[t,o,a,i,e])},z=Object(c.forwardRef)((function(e,t){var n=Object(c.useRef)();return L(n,"onHover",e.onHover),L(n,"onBlur",e.onBlur),L(n,"onSelectStart",e.onSelectStart),L(n,"onSelectEnd",e.onSelectEnd),L(n,"onSelect",e.onSelect),L(n,"onSqueezeStart",e.onSqueezeStart),L(n,"onSqueezeEnd",e.onSqueezeEnd),L(n,"onSqueeze",e.onSqueeze),Object(k.jsx)("group",{ref:Object(T.a)([t,n]),children:e.children})}));var D=["foveation","children"],F=["onCreated","children","sessionInit"],V=c.createContext({});function G(e){var t=e.foveation,n=void 0===t?0:t,r=e.children,o=Object(f.e)(),a=o.gl,i=o.camera,s=c.useState((function(){return a.xr.isPresenting})),u=Object(p.a)(s,2),l=u[0],d=u[1],m=c.useState(!1),v=Object(p.a)(m,2),b=v[0],j=v[1],y=c.useState((function(){return new S.Group})),x=Object(p.a)(y,1)[0],g=function(e){var t=Object(f.e)().gl,n=c.useState([]),r=Object(p.a)(n,2),o=r[0],a=r[1];return c.useEffect((function(){[0,1].forEach((function(n){O(n,t,(function(t){e.add(t.controller),e.add(t.grip),e.add(t.hand),a((function(e){return[].concat(Object(h.a)(e),[t])}))}),(function(t){e.remove(t.controller),e.remove(t.grip),e.remove(t.hand),a((function(e){return e.filter((function(e){return e!==t}))}))}))}))}),[t,e]),o}(x);c.useEffect((function(){var e=a.xr,t=function(){return d(e.isPresenting)};return e.addEventListener("sessionstart",t),e.addEventListener("sessionend",t),function(){e.removeEventListener("sessionstart",t),e.removeEventListener("sessionend",t)}}),[a]),c.useEffect((function(){var e=a.xr;e.setFoveation&&e.setFoveation(n)}),[a,n]),c.useEffect((function(){var e,t=a.xr.getSession(),n=function(e){return j(Object.values(e.session.inputSources).some((function(e){return e.hand})))};return null===t||void 0===t||t.addEventListener("inputsourceschange",n),j(Object.values(null!==(e=null===t||void 0===t?void 0:t.inputSources)&&void 0!==e?e:[]).some((function(e){return e.hand}))),function(){null===t||void 0===t||t.removeEventListener("inputsourceschange",n)}}),[l]);var w=c.useMemo((function(){return{controllers:g,isPresenting:l,isHandTracking:b,player:x}}),[g,l,b,x]);return Object(k.jsxs)(V.Provider,{value:w,children:[Object(k.jsx)("primitive",{object:x,dispose:null,children:Object(k.jsx)("primitive",{object:i,dispose:null})}),r]})}function U(e){var t=e.foveation,n=e.children,r=Object(d.a)(e,D);return Object(k.jsx)(f.a,Object(l.a)(Object(l.a)({vr:!0},r),{},{children:Object(k.jsx)(G,{foveation:t,children:Object(k.jsx)(B,{children:n})})}))}var H=function(e,t,n){var r="AR"===e?x:g,o="AR"===e?"#ARButton":"#VRButton";if(null===document.querySelector(o)){var a=document.createElement("div");a.setAttribute("style"," padding: 16px; z-index: 999; position:absolute; "),a.setAttribute("class","logo");var i=document.createElement("img");i.src="https://psyche.asu.edu/wp-content/themes/psyche/static/img/nasa.svg",i.alt="NASA",i.setAttribute("style","height:57px; width:auto; ");var s=document.createElement("a");s.setAttribute("href","https://www.nasa.gov"),s.appendChild(i);var c=document.createElement("span");c.setAttribute("class","divider logo"),c.setAttribute("style","left:auto; width:1px; height: 57px; display:inline-block;  white-space: nowrap; font-family: monospace; margin: 0 14px; background: white;");var u=document.createElement("img");u.src="https://psyche.asu.edu/wp-content/themes/psyche/static/img/psyche.svg",u.alt="Psyche",u.setAttribute("style","height:57px; width: auto; ");var l=document.createElement("a");l.setAttribute("href","https://psyche.asu.edu"),l.appendChild(u);var d=document.createElement("h1");d.textContent="Psyche Rollercoaster",d.setAttribute("style","font-family: 'TradeGothic', 'Roboto', sans-serif; font-weight: bold; line-height:1.4; color:#a53f5b; font-size:xx-large; ");var h=document.createElement("p");h.textContent="An interactive experience tracking Psyche spacecraft. \r\n Wait till 3D models are loaded and moving on screen",h.setAttribute("style","color:white; font-family: 'Helvetica', 'Arial', sans-serif; font-size:19px; font-weight:400; line-height: 1.65;"),a.appendChild(s),a.appendChild(c),a.appendChild(l);var p=document.createElement("div");p.setAttribute("style"," padding: 16px; z-index: 999; position:absolute; "),p.setAttribute("id","mytext"),p.appendChild(d),p.appendChild(h);var f=document.getElementById("root");null===f||void 0===f||f.prepend(p),null===f||void 0===f||f.prepend(a),document.body.appendChild(r.createButton(t,n))}};function q(e){var t=e.onCreated,n=e.children,r=e.sessionInit,o=Object(d.a)(e,F);return Object(k.jsx)(U,Object(l.a)(Object(l.a)({onCreated:function(e){null===t||void 0===t||t(e),H("AR",e.gl,r)}},o),{},{children:n}))}var X=function(){var e=c.useContext(V),t=c.useContext(I);return c.useMemo((function(){return Object(l.a)(Object(l.a)({},e),t)}),[e,t])},W=o(8),Y=o(7),_=o(3),J=o(4),Q={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};function K(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(m.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.abrupt("return",n.json());case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(m.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("No basePath supplied");case 2:return"profilesList.json",e.next=5,K("".concat(t,"/").concat("profilesList.json"));case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return te=Object(m.a)(y.a.mark((function e(t,n){var r,o,a,i,s,c,u,l,d=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>2&&void 0!==d[2]?d[2]:null,o=!(d.length>3&&void 0!==d[3])||d[3],t){e.next=4;break}throw new Error("No xrInputSource supplied");case 4:if(n){e.next=6;break}throw new Error("No basePath supplied");case 6:return e.next=8,$(n);case 8:if(a=e.sent,t.profiles.some((function(e){var t=a[e];return t&&(i={profileId:e,profilePath:"".concat(n,"/").concat(t.path),deprecated:!!t.deprecated}),!!i})),i){e.next=17;break}if(r){e.next=13;break}throw new Error("No matching profile name found");case 13:if(s=a[r]){e.next=16;break}throw new Error('No matching profile name found and default profile "'.concat(r,'" missing.'));case 16:i={profileId:r,profilePath:"".concat(n,"/").concat(s.path),deprecated:!!s.deprecated};case 17:return e.next=19,K(i.profilePath);case 19:if(c=e.sent,!o){e.next=25;break}if(l="any"===t.handedness?c.layouts[Object.keys(c.layouts)[0]]:c.layouts[t.handedness]){e.next=24;break}throw new Error("No matching handedness, ".concat(t.handedness,", in profile ").concat(i.profileId));case 24:l.assetPath&&(u=i.profilePath.replace("profile.json",l.assetPath));case 25:return e.abrupt("return",{profile:c,assetPath:u});case 26:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}var ne={xAxis:0,yAxis:0,button:0,state:Q.ComponentState.DEFAULT};var re=function(){function e(t){Object(v.a)(this,e),this.componentProperty=t.componentProperty,this.states=t.states,this.valueNodeName=t.valueNodeName,this.valueNodeProperty=t.valueNodeProperty,this.valueNodeProperty===Q.VisualResponseProperty.TRANSFORM&&(this.minNodeName=t.minNodeName,this.maxNodeName=t.maxNodeName),this.value=0,this.updateFromComponent(ne)}return Object(b.a)(e,[{key:"updateFromComponent",value:function(e){var t=e.xAxis,n=e.yAxis,r=e.button,o=e.state,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e,r=t;if(Math.sqrt(e*e+t*t)>1){var o=Math.atan2(t,e);n=Math.cos(o),r=Math.sin(o)}return{normalizedXAxis:.5*n+.5,normalizedYAxis:.5*r+.5}}(t,n),i=a.normalizedXAxis,s=a.normalizedYAxis;switch(this.componentProperty){case Q.ComponentProperty.X_AXIS:this.value=this.states.includes(o)?i:.5;break;case Q.ComponentProperty.Y_AXIS:this.value=this.states.includes(o)?s:.5;break;case Q.ComponentProperty.BUTTON:this.value=this.states.includes(o)?r:0;break;case Q.ComponentProperty.STATE:this.valueNodeProperty===Q.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(o):this.value=this.states.includes(o)?1:0;break;default:throw new Error("Unexpected visualResponse componentProperty ".concat(this.componentProperty))}}}]),e}(),oe=function(){function e(t,n){var r=this;if(Object(v.a)(this,e),!t||!n||!n.visualResponses||!n.gamepadIndices||0===Object.keys(n.gamepadIndices).length)throw new Error("Invalid arguments supplied");this.id=t,this.type=n.type,this.rootNodeName=n.rootNodeName,this.touchPointNodeName=n.touchPointNodeName,this.visualResponses={},Object.keys(n.visualResponses).forEach((function(e){var t=new re(n.visualResponses[e]);r.visualResponses[e]=t})),this.gamepadIndices=Object.assign({},n.gamepadIndices),this.values={state:Q.ComponentState.DEFAULT,button:void 0!==this.gamepadIndices.button?0:void 0,xAxis:void 0!==this.gamepadIndices.xAxis?0:void 0,yAxis:void 0!==this.gamepadIndices.yAxis?0:void 0}}return Object(b.a)(e,[{key:"data",get:function(){return Object(l.a)({id:this.id},this.values)}},{key:"updateFromGamepad",value:function(e){var t=this;if(this.values.state=Q.ComponentState.DEFAULT,void 0!==this.gamepadIndices.button&&e.buttons.length>this.gamepadIndices.button){var n=e.buttons[this.gamepadIndices.button];this.values.button=n.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,n.pressed||1===this.values.button?this.values.state=Q.ComponentState.PRESSED:(n.touched||this.values.button>Q.ButtonTouchThreshold)&&(this.values.state=Q.ComponentState.TOUCHED)}void 0!==this.gamepadIndices.xAxis&&e.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=e.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===Q.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>Q.AxisTouchThreshold&&(this.values.state=Q.ComponentState.TOUCHED)),void 0!==this.gamepadIndices.yAxis&&e.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=e.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===Q.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>Q.AxisTouchThreshold&&(this.values.state=Q.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach((function(e){e.updateFromComponent(t.values)}))}}]),e}(),ae=function(){function e(t,n,r){var o=this;if(Object(v.a)(this,e),!t)throw new Error("No xrInputSource supplied");if(!n)throw new Error("No profile supplied");this.xrInputSource=t,this.assetUrl=r,this.id=n.profileId,this.layoutDescription=n.layouts[t.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach((function(e){var t=o.layoutDescription.components[e];o.components[e]=new oe(e,t)})),this.updateFromGamepad()}return Object(b.a)(e,[{key:"gripSpace",get:function(){return this.xrInputSource.gripSpace}},{key:"targetRaySpace",get:function(){return this.xrInputSource.targetRaySpace}},{key:"data",get:function(){var e=[];return Object.values(this.components).forEach((function(t){e.push(t.data)})),e}},{key:"updateFromGamepad",value:function(){var e=this;Object.values(this.components).forEach((function(t){t.updateFromGamepad(e.xrInputSource.gamepad)}))}}]),e}(),ie=o(52),se="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",ce=function(e){Object(_.a)(n,e);var t=Object(J.a)(n);function n(){var e;return Object(v.a)(this,n),(e=t.call(this)).motionController=null,e.envMap=null,e}return Object(b.a)(n,[{key:"setEnvironmentMap",value:function(e){var t=this;return this.envMap==e||(this.envMap=e,this.traverse((function(e){e.isMesh&&(e.material.envMap=t.envMap,e.material.needsUpdate=!0)}))),this}},{key:"updateMatrixWorld",value:function(e){Object(W.a)(Object(Y.a)(n.prototype),"updateMatrixWorld",this).call(this,e),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach((function(e){Object.values(e.visualResponses).forEach((function(e){var t=e.valueNode,n=e.minNode,r=e.maxNode,o=e.value,a=e.valueNodeProperty;t&&(a===Q.VisualResponseProperty.VISIBILITY?t.visible=o:a===Q.VisualResponseProperty.TRANSFORM&&(t.quaternion.slerpQuaternions(n.quaternion,r.quaternion,o),t.position.lerpVectors(n.position,r.position,o)))}))})))}}]),n}(S.Object3D);function ue(e,t){!function(e,t){Object.values(e.components).forEach((function(e){var n=e.type,r=e.touchPointNodeName,o=e.visualResponses;if(n===Q.ComponentType.TOUCHPAD)if(e.touchPointNode=t.getObjectByName(r),e.touchPointNode){var a=new S.SphereGeometry(.001),i=new S.MeshBasicMaterial({color:255}),s=new S.Mesh(a,i);e.touchPointNode.add(s)}else console.warn("Could not find touch dot, ".concat(e.touchPointNodeName,", in touchpad component ").concat(e.id));Object.values(o).forEach((function(e){var n=e.valueNodeName,r=e.minNodeName,o=e.maxNodeName;if(e.valueNodeProperty===Q.VisualResponseProperty.TRANSFORM){if(e.minNode=t.getObjectByName(r),e.maxNode=t.getObjectByName(o),!e.minNode)return void console.warn("Could not find ".concat(r," in the model"));if(!e.maxNode)return void console.warn("Could not find ".concat(o," in the model"))}e.valueNode=t.getObjectByName(n),e.valueNode||console.warn("Could not find ".concat(n," in the model"))}))}))}(e.motionController,t),e.envMap&&t.traverse((function(t){t.isMesh&&(t.material.envMap=e.envMap,t.material.needsUpdate=!0)})),e.add(t)}var le=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(v.a)(this,e),this.gltfLoader=t,this.path=se,this._assetCache={},this.gltfLoader||(this.gltfLoader=new ie.a)}return Object(b.a)(e,[{key:"createControllerModel",value:function(e){var t=this,n=new ce,r=null;return e.addEventListener("connected",(function(e){var o=e.data;"tracked-pointer"===o.targetRayMode&&o.gamepad&&function(e,t){return te.apply(this,arguments)}(o,t.path,"generic-trigger").then((function(e){var a=e.profile,i=e.assetPath;n.motionController=new ae(o,a,i);var s=t._assetCache[n.motionController.assetUrl];if(s)r=s.scene.clone(),ue(n,r);else{if(!t.gltfLoader)throw new Error("GLTFLoader not set.");t.gltfLoader.setPath(""),t.gltfLoader.load(n.motionController.assetUrl,(function(e){t._assetCache[n.motionController.assetUrl]=e,r=e.scene.clone(),ue(n,r)}),null,(function(){throw new Error("Asset ".concat(n.motionController.assetUrl," missing or malformed."))}))}})).catch((function(e){console.warn(e)}))})),e.addEventListener("disconnected",(function(){n.motionController=null,n.remove(r),r=null})),n}}]),e}(),de=new le,he=new WeakMap;function pe(e){var t=e.rayMaterial,n=void 0===t?{}:t,r=Object(f.e)().scene,o=X(),a=o.controllers,i=o.hoverState,s=u.a.useState(new Map),d=Object(p.a)(s,1)[0];return Object(f.c)((function(){a.forEach((function(e){var t=d.get(e.controller.id);if(t){var n=i[e.inputSource.handedness].values().next().value;if(n&&"none"!==e.inputSource.handedness){var r=n.distance;t.visible=!0,t.scale.y=r+-.01,t.position.z=-r/2- -.01}else t.visible=!1}}))})),Object(c.useEffect)((function(){var e=[];return a.forEach((function(t){var r,o=t.controller,a=t.grip,i=t.inputSource;he.has(o)?r=he.get(o):(r=de.createControllerModel(o),o.dispatchEvent({type:"connected",data:i,fake:!0}),he.set(o,r)),a.add(r);var s=new S.Mesh;s.rotation.set(Math.PI/2,0,0),s.material=new S.MeshBasicMaterial(Object(l.a)({color:new S.Color(16777215),opacity:.8,transparent:!0},n)),s.geometry=new S.BoxBufferGeometry(.002,1,.002),d.set(o.id,s),o.add(s),e.push((function(){a.remove(r),o.remove(s),d.delete(o.id)}))})),function(){e.forEach((function(e){return e()}))}}),[a,r,d,JSON.stringify(n)]),null}o(44);function fe(e){var t=e.count,n=void 0===t?2e3:t,r=Object(c.useMemo)((function(){for(var e=[],t=0;t<n;t++){var r=4e3,o=2*Math.PI*Math.random(),a=Math.acos(2*Math.random()-1),i=r*Math.cos(o)*Math.sin(a)+(4e3*Math.random()-2e3),s=r*Math.sin(o)*Math.sin(a)+(4e3*Math.random()-2e3),c=r*Math.cos(a)+(2e3*Math.random()-1e3);e.push(i),e.push(s),e.push(c)}return new Float32Array(e)}),[n]);return Object(k.jsxs)("points",{children:[Object(k.jsx)("bufferGeometry",{children:Object(k.jsx)("bufferAttribute",{attachObject:["attributes","position"],count:r.length/3,array:r,itemSize:3})}),Object(k.jsx)("pointsMaterial",{size:15,sizeAttenuation:!0,color:"white",fog:!1})]})}function me(){var e=Object(c.useRef)();return Object(f.c)((function(){return e.current.rotation.y=e.current.rotation.y+.01})),Object(k.jsx)("group",{ref:e,scale:[100,100,100],position:[0,0,0],children:Object(k.jsxs)("mesh",{position:[0,0,0],children:[Object(k.jsx)("sphereGeometry",{args:[4,32,32]}),Object(k.jsx)("meshBasicMaterial",{color:"#FFFF99",fog:!1}),Object(k.jsx)("pointLight",{distance:6100,intensity:10,color:"white"}),"1"]})})}o(49);var ve=o(31),be=o.n(ve),je=o.p+"static/media/laser.373d639d.mp3",ye=o.p+"static/media/engine.75bbe12e.mp3",xe=o.p+"static/media/engine2.87c3c40a.mp3",ge=o.p+"static/media/bg.c6b2b728.mp3",Oe=o.p+"static/media/warp.1f9bec85.mp3",we=o.p+"static/media/click.db461987.mp3",Se=o.p+"static/media/explosion.615cfd43.mp3",Me=(new Audio(je),new Audio(ye)),Ee=(new Audio(xe),new Audio(ge)),Ae=(new Audio(Oe),new Audio(we),new Audio(Se),function(e){Object(_.a)(n,e);var t=Object(J.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new S.Vector3,n=t,r=80,o=150,a=2*Math.PI*e*o/500,i=Math.cos(a)*r,s=Math.sin(a)*r,c=0;return n.set(s,c,i)}}]),n}(S.Curve)),Ce=function(e){Object(_.a)(n,e);var t=Object(J.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new S.Vector3,n=t,r=80,o=150,a=(Math.PI,r),i=r,s=1;return n.set(i,s,a)}}]),n}(S.Curve),Pe=function(e){Object(_.a)(n,e);var t=Object(J.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new S.Vector3,n=t;e=2*Math.PI*e;var r=-.22*Math.cos(e)-1.28*Math.sin(e)-.44*Math.cos(3*e)-.78*Math.sin(3*e),o=-.1*Math.cos(2*e)-.27*Math.sin(2*e)+.38*Math.cos(4*e)+.46*Math.sin(4*e),a=.7*Math.cos(3*e)-.4*Math.sin(3*e);return n.set(r,o,a).multiplyScalar(20)}}]),n}(S.Curve),Te=1,Re=be()((function(t,n){var o=new Pe,i=new S.TubeBufferGeometry(o,250,.2,10,!0),s=new Ae,c=new Ce,u=(new S.TubeBufferGeometry(c,250,.2,10,!0),new S.TubeBufferGeometry(s,250,.2,10,!0),void 0),d=void 0,p=new S.Box3;return{sound:!1,camera:void 0,points:0,health:100,lasers:[],explosions:[],rocks:ke(100,i,150,8,(function(){return 1+2.5*Math.random()})),enemies:ke(10,i,20,15,1),mutation:{insertion:!1,t:0,position:new S.Vector3,startTime:Date.now(),track:i,scale:15,fov:70,hits:!1,rings:Ne(30,i),particles:ke(1500,i,100,1,(function(){return.5+.8*Math.random()})),looptime:4e4,binormal:new S.Vector3,normal:new S.Vector3,clock:new S.Clock(!1),mouse:new S.Vector2(-250,50),dummy:new S.Object3D,ray:new S.Ray,box:new S.Box3},actions:{init:function(o){var s=n(),c=s.mutation,u=s.actions;t({camera:o}),c.clock.start(),u.toggleSound(n().sound),Object(f.b)((function(){var o=n(),s=(o.rocks,o.enemies,Date.now()),u=c.t=(s-c.startTime)%c.looptime/c.looptime;c.position=i.parameters.path.getPointAt(u),c.position.multiplyScalar(c.scale);var p=!1;u>.3&&u<.4?p||(p=!0):u>.5&&(p=!1);c.hits;var f=n().lasers;if(c.hits&&f.length&&s-f[f.length-1]<100){var m=a.map((function(e){return Object(l.a)({time:Date.now()},e)}));t((function(e){return{explosions:[].concat(Object(h.a)(e.explosions),Object(h.a)(m))}})),clearTimeout(d),d=setTimeout((function(){return t((function(e){return{explosions:e.explosions.filter((function(e){var t=e.time;return Date.now()-t<=1e3}))}}))}),1e3),t((function(t){return{points:t.points+100*r.length+200*e.length,rocks:t.rocks.filter((function(e){return!r.find((function(t){return t.guid===e.guid}))})),enemies:t.enemies.filter((function(t){return!e.find((function(e){return e.guid===t.guid}))}))}}))}}))},shoot:function(){t((function(e){return{lasers:[].concat(Object(h.a)(e.lasers),[Date.now()])}})),clearTimeout(u),u=setTimeout((function(){return t((function(e){return{lasers:e.lasers.filter((function(e){return Date.now()-e<=1e3}))}}))}),1e3)},toggleSound:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!n().sound;t({sound:e}),Ie(Me,1,!0),Ie(Ee,1,!0)},updateMouse:function(e){var t=e.clientX,r=e.clientY;n().mutation.mouse.set(t-window.innerWidth/2,r-window.innerHeight/2)},test:function(e){p.min.copy(e.offset),p.max.copy(e.offset),p.expandByScalar(e.size*e.scale),e.hit.set(1e4,1e4,1e4);var t=n().mutation.ray.intersectBox(p,e.hit);return e.distance=n().mutation.ray.origin.distanceTo(e.hit),t}}}}));function ke(e,t,n,r,o){return new Array(e).fill().map((function(){var e=Math.random(),a=t.parameters.path.getPointAt(e);a.multiplyScalar(15);var i=a.clone().add(new S.Vector3(-n+Math.random()*n*2,-n+Math.random()*n*2,-n+Math.random()*n*2)),s=.1+Math.random();return{guid:Te++,scale:"function"===typeof o?o():o,size:r,offset:i,pos:a,speed:s,radius:n,t:e,hit:new S.Vector3,distance:1e3}}))}function Ne(e,t){for(var n=[],r=.4,o=0;o<e;o++){r+=.003;var a=t.parameters.path.getPointAt(r);a.multiplyScalar(15);var i=r*t.tangents.length,s=Math.floor(i),c=t.parameters.path.getPointAt((r+1/t.parameters.path.getLength())%1).multiplyScalar(15),u=(new S.Matrix4).lookAt(a,c,t.binormals[s]);n.push([a.toArray(),u])}return n}function Ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Re.getState().sound?(e.currentTime=0,e.volume=t,e.loop=n,e.play()):e.pause()}var Be=Re,Le=o.p+"static/media/earth.beb10304.jpg",ze=o.p+"static/media/moon.1dd7bdd6.png",De=o.p+"static/media/mars.d5a1f3ac.jpg",Fe=o(53),Ve=["color","size","scale","children"],Ge=["camera"];function Ue(e){var t=e.color,n=e.size,r=e.scale,o=e.children,a=Object(d.a)(e,Ve);return Object(k.jsxs)("mesh",Object(l.a)(Object(l.a)({scale:r},a),{},{children:[Object(k.jsx)("boxBufferGeometry",{attach:"geometry",args:n}),Object(k.jsx)("meshPhongMaterial",{attach:"material",color:t}),o]}))}function He(e){var t=e.camera,n=Object(d.a)(e,Ge),r=Object(c.useState)(!1),o=Object(p.a)(r,2),a=o[0],i=o[1],s=Object(c.useState)("blue"),u=Object(p.a)(s,2),h=u[0],f=u[1],m=Object(c.useState)([.4,.1,.01]),v=Object(p.a)(m,2),b=v[0],j=v[1],y=Object(c.useState)("Press and Track Psyche"),x=Object(p.a)(y,2),g=x[0],O=x[1],w=Be((function(e){return e.actions})),S=Be((function(e){return e.actions.toggleSound}));return Object(k.jsx)(z,{onHover:function(){return i(!0)},onBlur:function(){return i(!1)},onSelect:function(){f(16777215*Math.random()|0),j([0,0,0]),O(""),w.init(t),S()},children:Object(k.jsx)(Ue,Object(l.a)(Object(l.a)({rotation:[0,90,0],color:h,scale:a?[.6,.6,.6]:[.5,.5,.5],size:b},n),{},{children:Object(k.jsx)(Fe.a,{position:[0,0,.01],fontSize:.03,color:"#000",anchorX:"center",anchorY:"middle",children:g})}))})}function qe(){var e=Object(c.useRef)(),t=Object(f.d)(S.TextureLoader,[Le,ze,De]),n=Object(p.a)(t,3),r=n[0],o=n[1];n[2];Object(f.c)((function(t,n){return e.current.rotation.y+=.01}));var a=Be((function(e){return e.mutation})),i=a.fov;a.position;return Object(k.jsxs)("group",{ref:e,scale:[200,200,200],position:[-4e3,0,4e3],children:[Object(k.jsx)(He,{position:[10,0,-10],camera:{position:[-5e3,0,5e3],near:.01,far:1e5,fov:i}}),Object(k.jsxs)("mesh",{position:[0,0,0],children:[Object(k.jsx)("sphereGeometry",{args:[5,32,32]}),Object(k.jsx)("meshStandardMaterial",{map:r,roughness:1,fog:!1})]}),Object(k.jsxs)("mesh",{position:[5,0,5],children:[Object(k.jsx)("sphereGeometry",{args:[.75,32,32]}),Object(k.jsx)("meshStandardMaterial",{roughness:1,map:o,fog:!1})]})]})}function Xe(){var e=Object(c.useRef)(),t=Object(f.d)(S.TextureLoader,[De]),n=Object(p.a)(t,1)[0];return Object(f.c)((function(){return e.current.rotation.y=e.current.rotation.y+.01})),Object(k.jsx)("group",{ref:e,scale:[100,100,100],position:[5e3,0,-5e3],children:Object(k.jsxs)("mesh",{position:[0,0,0],children:[Object(k.jsx)("sphereGeometry",{args:[5,32,32]}),Object(k.jsx)("meshStandardMaterial",{map:n,roughness:1,fog:!1})]})})}var We=0;function Ye(e){var t=e.children,n=Object(c.useRef)(),r=Object(c.useRef)(),o=Be((function(e){return e.mutation})),a=o.fov,i=o.scale,s=o.binormal,u=o.normal,l=o.track,d=o.mouse,h=Object(f.e)().camera;return Object(f.c)((function(){var e=o.t,t=o.position.clone(),r=l.tangents.length,c=e*r,p=Math.floor(c),f=(p+1)%r;s.subVectors(l.binormals[f],l.binormals[p]),s.multiplyScalar(c-p).add(l.binormals[p]);var m=l.parameters.path.getTangentAt(e);We+=.05*(Math.max(15,15+-d.y/20)-We),u.copy(s).cross(m),t.add(u.clone().multiplyScalar(We)),h.position.copy(t);var v=l.parameters.path.getPointAt((e+30/l.parameters.path.getLength())%1).multiplyScalar(i);h.matrix.lookAt(h.position,v,u),h.quaternion.setFromRotationMatrix(h.matrix),h.fov+=.05*((e>.4&&e<.45?120:a)-h.fov),h.updateProjectionMatrix();var b=l.parameters.path.getPointAt((e+1/l.parameters.path.getLength())%1).multiplyScalar(i);n.current.position.copy(b),n.current.quaternion.setFromRotationMatrix(h.matrix)})),Object(k.jsxs)("group",{ref:n,children:[Object(k.jsx)("pointLight",{distance:400,position:[0,100,-420],intensity:5,color:"indianred"}),Object(k.jsx)("group",{ref:r,position:[0,0,-50],children:t})]})}o(33),new S.BoxBufferGeometry(1,1,40);var _e=new S.Color("lightgreen"),Je=new S.Color("hotpink");new S.MeshBasicMaterial({color:_e}),new S.MeshBasicMaterial({color:Je,fog:!1}),new S.Vector3,new S.Vector3;var Qe=o(54),Ke=new S.BoxBufferGeometry(1,1,40),Ze=new S.Color("lightgreen"),$e=new S.Color("hotpink"),et=new S.MeshBasicMaterial({color:Ze}),tt=new S.MeshBasicMaterial({color:$e,fog:!1}),nt=new S.Vector3,rt=new S.Vector3;function ot(){var e=Object(Qe.a)("/psyche/psychespacecraft2.glb"),t=e.nodes,n=e.materials,r=Be((function(e){return e.mutation})),o=r.clock,a=r.mouse,i=r.ray,s=Be((function(e){return e.lasers})),u=Object(c.useRef)(),l=Object(c.useRef)(),d=Object(c.useRef)(),h=Object(c.useRef)(),p=Object(c.useRef)(),m=Object(c.useRef)();return Object(f.c)((function(){u.current.position.z=Math.sin(40*o.getElapsedTime())*Math.PI*.2,u.current.rotation.z+=.2*(a.x/500-u.current.rotation.z),u.current.rotation.x+=.2*(-a.y/1200-u.current.rotation.x),u.current.rotation.y+=.2*(-a.x/1200-u.current.rotation.y),u.current.position.x+=.2*(a.x/10-u.current.position.x),u.current.position.y+=.2*(25+-a.y/10-u.current.position.y),h.current.scale.x=1+Math.sin(200*o.getElapsedTime()),h.current.scale.y=1+Math.sin(200*o.getElapsedTime());for(var e=0;e<s.length;e++){l.current.children[e].position.z-=20}d.current.intensity+=.3*((s.length&&Date.now()-s[s.length-1]<100?20:0)-d.current.intensity),u.current.getWorldPosition(nt),u.current.getWorldDirection(rt),i.origin.copy(nt),i.direction.copy(rt.negate()),tt.color=r.hits?Ze:$e,p.current.visible=!r.hits,m.current.visible=!!r.hits})),Object(k.jsxs)("group",{ref:u,children:[Object(k.jsxs)("group",{scale:[.5,.5,.5],children:[Object(k.jsx)("group",{ref:p,position:[0,0,-300],name:"cross"}),Object(k.jsxs)("group",{ref:m,position:[0,0,-300],name:"target",children:[Object(k.jsx)("mesh",{position:[0,20,0],renderOrder:1e3,material:tt,children:Object(k.jsx)("boxGeometry",{args:[40,2,2]})}),Object(k.jsx)("mesh",{position:[0,-20,0],renderOrder:1e3,material:tt,children:Object(k.jsx)("boxGeometry",{args:[40,2,2]})}),Object(k.jsx)("mesh",{position:[20,0,0],renderOrder:1e3,material:tt,children:Object(k.jsx)("boxGeometry",{args:[2,40,2]})}),Object(k.jsx)("mesh",{position:[-20,0,0],renderOrder:1e3,material:tt,children:Object(k.jsx)("boxGeometry",{args:[2,40,2]})})]}),Object(k.jsx)("pointLight",{ref:d,position:[0,0,-20],distance:100,intensity:0,color:"lightgreen"}),Object(k.jsx)("group",{ref:l,children:s.map((function(e,t){return Object(k.jsxs)("group",{children:[Object(k.jsx)("mesh",{position:[-2.8,0,-.8],geometry:Ke,material:et}),Object(k.jsx)("mesh",{position:[2.8,0,-.8],geometry:Ke,material:et})]},t)}))}),Object(k.jsxs)("group",{rotation:[Math.PI/2,Math.PI,0],children:[Object(k.jsx)("mesh",{name:"Psyche",castShadow:!0,receiveShadow:!0,geometry:t.Psyche.geometry,material:t.Psyche.material}),Object(k.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.Psyche001.geometry,material:t.Psyche001.material}),Object(k.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.Psyche002.geometry,material:n["Material.002"]})]})]}),Object(k.jsxs)("mesh",{ref:h,scale:[1,1,30],position:[0,1,30],children:[Object(k.jsx)("dodecahedronBufferGeometry",{args:[1.5,0]}),Object(k.jsx)("meshBasicMaterial",{color:"lightblue"})]})]})}function at(){var e=Object(c.useRef)(),t=Object(Qe.a)("/psyche/PsycheAsteroid1.glb"),n=t.nodes,r=t.materials;return Object(f.c)((function(){return e.current.rotation.x+=.1})),Object(k.jsx)("group",{ref:e,scale:[300,300,300],position:[6e3,0,6e3],children:Object(k.jsx)("mesh",{geometry:n.psyche_LP001.geometry,material:r.psycheAsteroid,rotation:[Math.PI/2,0,0]})})}function it(){var e=Object(c.useRef)(),t=Be((function(e){return e.mutation})),n=t.fov;t.position;return Object(f.c)((function(t,n){return e.current.rotation.y+=.01})),Object(k.jsxs)("group",{ref:e,scale:[1,1,1],position:[0,0,0],children:[Object(k.jsx)(me,{}),Object(k.jsx)(He,{scale:[10,10,10],position:[-10,0,10],camera:{position:[-5e3,0,5e3],near:.01,far:1e5,fov:n}}),Object(k.jsx)(qe,{}),Object(k.jsx)(Xe,{}),Object(k.jsx)(at,{}),Object(k.jsx)(Ye,{children:Object(k.jsx)(ot,{})})]})}function st(){var e=Object(c.useRef)(),t=Be((function(e){return e.mutation})),n=t.particles,r=t.dummy;return Object(c.useEffect)((function(){n.forEach((function(t,n){var o=t.offset,a=t.scale;r.position.copy(o),r.scale.set(a,a,a),r.rotation.set(Math.sin(Math.random())*Math.PI,Math.sin(Math.random())*Math.PI,Math.cos(Math.random())*Math.PI),r.updateMatrix(),e.current.setMatrixAt(n,r.matrix)})),e.current.instanceMatrix.needsUpdate=!0}),[]),Object(k.jsxs)("instancedMesh",{ref:e,args:[null,null,n.length],frustumCulled:!1,children:[Object(k.jsx)("coneGeometry",{args:[2,2,3]}),Object(k.jsx)("meshStandardMaterial",{color:"#606060"})]})}function ct(){Be((function(e){return e.actions}));var e=Be((function(e){return e.mutation})),t=e.fov;e.position;function n(){return Object(k.jsx)(c.Suspense,{fallback:null,children:Object(k.jsx)(it,{})})}return Object(k.jsxs)(q,{gl:{antialias:!1},camera:{position:[-5e3,0,5e3],near:.01,far:1e5,fov:t},children:[" ",Object(k.jsx)("ambientLight",{intensity:.25}),Object(k.jsx)(n,{}),Object(k.jsx)(pe,{}),Object(k.jsx)(st,{}),Object(k.jsx)(fe,{})]})}s.a.render(Object(k.jsx)(ct,{}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.21cb8766.chunk.js.map